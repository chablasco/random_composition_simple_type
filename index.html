<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>CB Half Typography Random Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
<script>
let font;
let upperChar, lowerChar;
let upperTempo = 720; // Tempo for updating the top half (ms)
let lowerTempo = 700; // Tempo for updating the bottom half (ms)
let lastUpperChange = 0;
let lastLowerChange = 0;
const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

// Offscreen graphics buffers for the two halves
let upperG, lowerG;
// Adjust this offset to shift the lower half further down:
let lowerOffset = 40; // You can tweak this value for fine tuning

function preload() {
  // Load the font (ensure "assets/Combine.otf" exists)
  font = loadFont("assets/Combine.otf");
}

function setup() {
  createCanvas(windowWidth, windowHeight);
  textAlign(CENTER, CENTER);

  // Create offscreen graphics buffers matching the canvas size
  upperG = createGraphics(windowWidth, windowHeight);
  lowerG = createGraphics(windowWidth, windowHeight);
  setupGraphics(upperG);
  setupGraphics(lowerG);

  // Initialize with random letters
  upperChar = randomChar();
  lowerChar = randomChar();
}

function draw() {
  background(255); // White background

  const now = millis();
  if (now - lastUpperChange > upperTempo) {
    upperChar = randomChar();
    lastUpperChange = now;
  }
  if (now - lastLowerChange > lowerTempo) {
    lowerChar = randomChar();
    lastLowerChange = now;
  }

  // Draw the upper letter normally (centered)
  upperG.background(255);
  upperG.fill(0);
  upperG.text(upperChar, width / 2, height / 2);

  // Draw the lower letter shifted down by lowerOffset
  lowerG.background(255);
  lowerG.fill(0);
  lowerG.text(lowerChar, width / 2, height / 2 + lowerOffset);

  // Copy the top half of the upper letter to the main canvas
  copy(upperG, 0, 0, width, height / 2, 0, 0, width, height / 2);

  // Copy the bottom half of the lower letter to the main canvas
  copy(lowerG, 0, height / 2, width, height / 2, 0, height / 2, width, height / 2);
}

function setupGraphics(pg) {
  pg.textAlign(CENTER, CENTER);
  pg.textFont(font);
  pg.textSize(350);
}

function randomChar() {
  return chars.charAt(int(random(chars.length)));
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
  // Recreate the offscreen graphics buffers with new dimensions
  upperG = createGraphics(windowWidth, windowHeight);
  lowerG = createGraphics(windowWidth, windowHeight);
  setupGraphics(upperG);
  setupGraphics(lowerG);
}
</script>
</body>
</html>
