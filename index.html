<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>CB Half Typography Random Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
  <script>
    let font;
    let upperChar, lowerChar;
    let upperTempo = 320; // Tempo (ms) for updating the top half
    let lowerTempo = 300; // Tempo (ms) for updating the bottom half
    let lastUpperChange = 0;
    let lastLowerChange = 0;
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"; // Characters set

    function preload() {
      // Ensure the font is available in the assets folder
      font = loadFont("assets/Combine.otf");
    }

    function setup() {
      createCanvas(windowWidth, windowHeight);
      textAlign(CENTER, CENTER);
      textFont(font);
      textSize(350);
      // Initialize with random characters
      upperChar = randomChar();
      lowerChar = randomChar();
    }

    function draw() {
      background(255); // White background
      fill(0);         // Black text

      const now = millis();
      // Update the top half letter if enough time has passed
      if (now - lastUpperChange > upperTempo) {
        upperChar = randomChar();
        lastUpperChange = now;
      }
      // Update the bottom half letter if enough time has passed
      if (now - lastLowerChange > lowerTempo) {
        lowerChar = randomChar();
        lastLowerChange = now;
      }

      // Draw the top half from upperChar
      push();
        // Clip to the top half of the canvas
        clip(0, 0, width, height/2);
        // Draw the letter centered on the canvas
        text(upperChar, width / 2, height / 2);
      pop();

      // Draw the bottom half from lowerChar
      push();
        // Clip to the bottom half of the canvas
        clip(0, height / 2, width, height / 2);
        // Draw the letter centered on the canvas
        text(lowerChar, width / 2, height / 2);
      pop();
    }

    // Helper function to return a random character from chars
    function randomChar() {
      return chars.charAt(int(random(chars.length)));
    }

    function windowResized() {
      resizeCanvas(windowWidth, windowHeight);
    }
  </script>
</body>
</html>
